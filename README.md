# TextPoints v. 0.1.0

Код, написанный в рамках выполнения курсовой работы "Площадка для анализа и визуализации корпусных данных"

С рабочим вариантом запущенного приложения можно ознакомиться по адресу http://77.222.60.95:8000/ (Требуется авторизация - для получения логина и пароля обратитесь к автору). Данные, использованные в рабочей версии - корпус REALEC (http://realec.org/). В настоящее время платформа поддерживает только схему разметки экстралингвистических метаданных этого корпуса.

Документация Django - https://docs.djangoproject.com/en/2.2/
Документация SpaCy - https://spacy.io/usage

## Клиентская часть

### Корреляционный анализ пары лингвистических единиц

Выберите вкладку <b>Pairwise correlations</b> на верхней панели (выбрана по умолчанию).

В форме <b> Select subcorpora </b> введите параметры нужного вам подкорпуса.

Чтобы добавить к выборке ещё один подкорпус, нажмите кнопку <b>+</b>.

Для того, чтобы удалить подкорпус из запроса нажмите кнопку <b>-</b>.

Всего можно выбрать до 7 подкорпусов.

Введите признаки двух лингвистических единиц для анализа в формах <b>Specify first linguistic variable for correlation analysis</b> и <b>Specify second linguistic variable for correlation analysis</b>. Вы можете добавить к каждой из единиц синтаксическое зависимое (в рамках теории грамматики зависимостей), нажав на кнопку <b>Add dependency</b>.

Нажмите кнопку <b>Perform analysis</b>, чтобы произвести корреляционный анализ единиц в выбранных подкорпусах.

На странице выдачи пользователю демонстрируется диаграмма рассеяния (scatter plot), по осям которой отложены частоты единиц в текстах. Тексты разных подкорпусов отмечаются на графике точками разных цветов, также для каждого подкорпуса строится линия регрессии. Кроме графиков выводятся значения коэффициента корреляции Пирсона в разных корпусах и уравнения линейной регрессии между единицами. Для каждой пары подкорпусов осуществляется проверка значимости разницы коэффициентов корреляции при помощи z-теста, результаты которой выводятся в таблицу. Также для каждого подкорпуса выводятся таблицы анализа полученной регрессии, сгенерированные пакетом statsmodels.

### Анализ распределения лингвистической единицы

Выберите вкладку <b>Frequencies of units</b> на верхней панели.

В форме <b> Select subcorpora </b> введите параметры нужного вам подкорпуса.

Чтобы добавить к выборке ещё один подкорпус, нажмите кнопку <b>+</b>.

Для того, чтобы удалить подкорпус из запроса нажмите кнопку <b>-</b>.

Всего можно выбрать до 7 подкорпусов.

Введите признаки лингвистической единицы для анализа в форме <b>Specify linguistic variable for correlation analysis</b>. Вы можете добавить к единице синтаксическое зависимое (в рамках теории грамматики зависимостей), нажав на кнопку <b>Add dependency</b>.

Нажмите кнопку <b>Perform analysis</b>, чтобы произвести анализ распределения единицы в выбранных подкорпусах.

В пользовательскую выдачу включается график приближенных функций плотности распределения частоты единицы в сегментах корпуса. Также в таблицах, отдельных для каждого корпуса, приводятся статистические характеристики распределения единицы: общая частота в корпусе, среднее, дисперсия и стандартное отклонение, минимум и максимум, число и доля текстов, в которых встречается единица, а также общее число текстов в подкорпусе. Также для каждой пары подкорпусов осуществляется проверка значимости разницы средних, дисперсий и доли содержащих единицу текстов при помощи t-теста Уэлча, F-теста и z-теста соответственно. 

## Серверная часть

### Системные требования

Для корректной работы приложения требуется установленный интерпретатор Python версии не ниже 3.5. Работоспособность программы на более ранних версиях Python не проверялась.

### Установка

- Скопируйте репозиторий на свой компьютер
- Переместитесь в папку со скопированным репозиторием и установите все необходимые зависимости при помощи команд:
```pip3 install django spacy matplotlib numpy pandas scipy statsmodels```
- Установите следующие значения в файле settings.py:
```
LANG_MODEL_PATH = r'Ваш\путь\к\языковой\модели\SpaCy'

TEXT_FILE_PATH = 'ваш\путь к папке'
```

### Заполнение базы данных

Для того, чтобы заполнить базу данных корпусной информацией, переместитесь в папку с приложением и введите следующую команду:

```
python3 manage.py process_files путь\к\папке\с\файлами\корпуса
```

Если не вводить путь к папке с файлами, то будет использовать путь из TEXT_FILE_PATH settings.py. Также можно вводить относительный путь внутри папки, указанной в значении TEXT_FILE_PATH

### Запуск и администрирование

Для того, чтобы запустить приложение, переместитесь в папку с ним и введите:

```
python3 manage.py runserver
```

или

```
python3 manage.py runserver 0.0.0.0:номер_порта
```

если хотите, чтобы ваш экземпляр приложения был доступен из сети Интернет.


Для того, чтобы добавить нового пользователя для приложения, воспользуйтесь следующей инструкцией: https://docs.djangoproject.com/en/2.2/topics/auth/default/

